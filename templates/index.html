[[extend 'layout.html']]

<style>
   [v-cloak] {
      display: none;
   }
</style>

<div class="section" id="vue-target" v-cloak>
   <div v-if="add_mode" class="container block">
      <div class="title">Add Matching</div>
      <div class="form">
         <div class="field">
            <label class="label">Name:</label>
            <div class="control">
               <input type="text" v-model="add_matching_name" class="input">
            </div>
         </div>
         <div class="field">
            <label class="label">Description:</label>
            <div class="control">
               <input type="text" v-model="add_matching_description" class="input">
            </div>
         </div>
         <div class="field">
            <div class="control">
               <input type="submit" @click="add_matching()" value="Add" class="button is-primary">
               <input type="submit" @click="set_add_status(false)" value="Cancel" class="button is-warning">
            </div>
         </div>
      </div>
   </div>

   <div class="container block">
      <h1 class="title">Matchings</h1>
      <table class="table is-striped is-fullwidth">
         <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Description</th>
            <th>Classes</th>
            <th>Professors</th>
            <th>Matches</th>
            <th>Created on</th>
            <th></th>
         </tr>
         <tr v-for="m in matchings">
            <td
               v-for="field in ['id', 'name', 'description', 'num_classes', 'num_professors', 'num_matches', 'created_on']">
               {{m[field]}}
            </td>
            <td>
               <button @click="delete_matching(m._idx)" class="button is-danger">
                  <i class="fa fa-trash"></i></button>
               <button @click="goto_matching(m._idx)" class="button is-warning">
                  <i class="fa fa-edit"></i></button>
            </td>
         </tr>
      </table>
      <button @click="set_add_status(true)" class="button is-primary">
         <i class="fa fa-plus fa-fw"></i> Add Matching
      </button>
   </div>
</div>

[[block page_scripts]]
<!-- Loads the index-specific js for Vue -->
<script>
   let load_matchings_url = "[[=XML(load_matchings_url)]]";
   let add_matching_url = "[[=XML(add_matching_url)]]";
   let delete_matching_url = "[[=XML(delete_matching_url)]]";
   let duplicate_matching_url = "";
   let edit_matching_url = "";
   let goto_matching_url = "[[=URL('matching')]]";
</script>
<script src="js/index.js"></script>
[[end]]